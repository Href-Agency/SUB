{% extends "_layout.twig" %}

{% block title %}Equipment List | {{ siteName }}{% endblock %}

{% block content %}
<article>
    {% set enquiriesCookie = craft.app.request.cookies.get('enquiries') %}
    {% set enquiriesData = {} %}
    {{ dump(craft.app.request.cookies) }}
    {% if enquiriesCookie and enquiriesCookie.value %}
        {% set enquiriesData = enquiriesCookie.value|json_decode %}
    {% endif %}

    
    <section class="equipment-list-page">
        <div class="site-container">
            <div class="page-header">
                <h1>Equipment List</h1>
                <p>Review your selected equipment and submit an enquiry</p>
            </div>
            
            <div class="equipment-list-container">
                <div class="enquiry-items-section">
                    <h2>Your Selected Equipment</h2>   
                    <div id="list-contents"></div>
                    <div class="enquiry-actions" style="display:none;">
                        <button id="clear-all-enquiries" class="btn btn-secondary">Clear All</button>
                    </div>
                    <div class="empty-state" style="display:none;">
                        <div class="empty-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
                                <path id="list-icon" d="M8,12V16H4V12ZM20,12V16H12V12ZM8,20V24H4V20ZM20,20V24H12V20ZM8,28V32H4V28ZM20,28V32H12V28Z" transform="translate(16 16)" fill="#9D9D9C"/>
                            </svg>
                        </div>
                        <h3>Your equipment list is currently empty</h3>
                        <p>Browse our products and add items to your enquiry list to get started.</p>
                        <a href="/" class="btn btn-primary">Browse Products</a>
                    </div>
                </div>
                
                <div class="enquiry-form-section">
                    <h2>Submit Enquiry</h2>
                    {% if enquiriesData|length > 0 %}
                        <div class="form-container">
                            {{ freeform.form("MultiEnquiryForm", {
                                formattingTemplate: "grid/index.twig"
                            }).render() }}
                        </div>
                    {% else %}
                        <div class="form-disabled-message">
                            <p>Add items to your equipment list to submit an enquiry.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
    
    {# Newsletter Signup Section #}
    <section class="newsletterSignupBanner">
        <div class="site-container">
            <div class="subtext">
                <h2>Stay Updated</h2>
                <p>Subscribe to our newsletter to receive the latest updates on new equipment and industry insights.</p>
            </div>
            <div class="form-container">
                {{ freeform.form("newsletterForm", {
                        formattingTemplate: "grid/index.twig"
                }).render() }}
            </div>
        </div>
    </section>
</article>


{% endblock %} 